/*!
 * jquery.lightbox.js
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2013 Duncan McDougall and other contributors; @license Creative Commons Attribution 2.5
 *
 * Options:
 * margin - int - default 50. Minimum margin around the image
 * nav - bool - default true. enable navigation
 * blur - bool - default true. Blur other content when open using css filter
 * minSize - int - default 0. Min window width or height to open lightbox. Below threshold will open image in a new tab.
 *
 */
!function(a){"use strict";a.fn.lightbox=function(b){var c={margin:50,nav:!0,blur:!0,minSize:0},d={items:[],lightbox:null,image:null,current:null,locked:!1,caption:null,init:function(b){d.items=b,d.selector="lightbox-"+Math.random().toString().replace(".",""),d.lightbox||(a("body").append('<div id="lightbox" style="display:none;"><a href="#" class="lightbox-close lightbox-button"></a><div class="lightbox-nav"><a href="#" class="lightbox-previous lightbox-button"></a><a href="#" class="lightbox-next lightbox-button"></a></div><div href="#" class="lightbox-caption"><p></p></div></div>'),d.lightbox=a("#lightbox"),d.caption=a(".lightbox-caption",d.lightbox)),d.items.length>1&&c.nav?a(".lightbox-nav",d.lightbox).show():a(".lightbox-nav",d.lightbox).hide(),d.bindEvents()},loadImage:function(){c.blur&&a("body").addClass("blurred"),a("img",d.lightbox).remove(),d.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var b=a('<img src="'+a(d.current).attr("href")+'" draggable="false">');a(b).load(function(){a(".lightbox-loading").remove(),d.lightbox.append(b),d.image=a("img",d.lightbox).hide(),d.resizeImage(),d.setCaption()})},setCaption:function(){var b=a(d.current).data("caption");b&&b.length>0?(d.caption.fadeIn(),a("p",d.caption).text(b)):d.caption.hide()},resizeImage:function(){var b,e,f,g,h;e=a(window).height()-c.margin,f=a(window).outerWidth(!0)-c.margin,d.image.width("").height(""),g=d.image.height(),h=d.image.width(),h>f&&(b=f/h,h=f,g=Math.round(g*b)),g>e&&(b=e/g,g=e,h=Math.round(h*b)),d.image.width(h).height(g).css({top:(a(window).height()-d.image.outerHeight())/2+"px",left:(a(window).width()-d.image.outerWidth())/2+"px"}).show(),d.locked=!1},getCurrentIndex:function(){return a.inArray(d.current,d.items)},next:function(){return d.locked?!1:(d.locked=!0,d.getCurrentIndex()>=d.items.length-1?a(d.items[0]).click():a(d.items[d.getCurrentIndex()+1]).click(),void 0)},previous:function(){return d.locked?!1:(d.locked=!0,d.getCurrentIndex()<=0?a(d.items[d.items.length-1]).click():a(d.items[d.getCurrentIndex()-1]).click(),void 0)},bindEvents:function(){a(d.items).click(function(b){if(!a("#lightbox").is(":visible")&&(a(window).width()<c.minSize||a(window).height()<c.minSize))return a(this).attr("target","_blank"),void 0;var e=a(this)[0];b.preventDefault(),d.current=e,d.loadImage(),a(document).on("keydown",function(a){27===a.keyCode&&d.close(),39===a.keyCode&&d.next(),37===a.keyCode&&d.previous()})}),d.lightbox.on("click",function(a){this===a.target&&d.close()}),a(d.lightbox).on("click",".lightbox-previous",function(){return d.previous(),!1}),a(d.lightbox).on("click",".lightbox-next",function(){return d.next(),!1}),a(d.lightbox).on("click",".lightbox-close",function(){return d.close(),!1}),a(window).resize(function(){d.image&&d.resizeImage()})},close:function(){a(document).off("keydown"),a(d.lightbox).fadeOut("fast"),a("body").removeClass("blurred")}};a.extend(c,b),d.init(this)}}(jQuery);

!function(a,b,c,d){"use strict";function h(a){var e=c("#content"),f=e.find(">div"),g=a.split("#");e.addClass("swapping"),g.length<2&&c("html, body").animate({scrollTop:0},600),f.fadeOut(300,function(){"/"!==a?(d.addClass("scroller"),c("#author-info").slideUp()):(d.removeClass("scroller"),c("#author-info").css("height","").slideDown()),c("#close").click(),c.ajax({url:a,dataType:"html"}).done(function(d){var f=c("<div>").append(c.parseHTML(d));e.removeClass("loading"),e.html(f.find("#content").html()),b.title=f.find("title").text(),c("a.selected").removeClass("selected");var h=a.split("/"),j="/"===a||h.length>1&&"blog"===h[1],k=j?'[href="/"], a[href="'+a+'"]':'[href="'+a+'"]',l=h.length>1&&"work"===h[1];k=l?'[href="/work/"], a[href="'+a+'"]':k,c("a"+k).addClass("selected"),"undefined"!=typeof c.fn.placeholder&&c("input, textarea").placeholder(),i(),e.find(">div").fadeIn(400,function(){g.length>1&&c("#"+g[1])&&c("html, body").animate({scrollTop:c("#"+g[1]).offset().top},600),e.removeClass("swapping")});var m=e.find(".gallery a");m.length&&m.lightbox(),DISQUS.reset({reload:!0})})})}function i(){c("img.lazy-load").each(function(){var a=c(this);a.data("src",a.attr("src")).removeClass("lazy-load").addClass("hide-until-load").attr("src","")}),c(a).scroll()}"undefined"==typeof history.pushState&&(history.pushState=function(){}),c(b).ready(function(c){c.extend(c.expr[":"],{aboveFold:function(a){var b=c(a),d=b.offset().top;return j>d},closeToView:function(a){var b=c(a),d=b.offset().top;return k>d}}),c.extend(c.expr[":"],{invalid:function(a){var b=c(a),d=!0;try{d=b.is(":invalid")}catch(e){d=""===c.trim(b.val())}return d}}),"undefined"!=typeof c.fn.placeholder&&c("input, textarea").placeholder();var d=c("#author-info"),e=d.height(),f=c(a).scrollTop(),g=c(a).height(),h=0,j=f+g,k=j+h;c(a).scroll(function(){f=c(a).scrollTop(),g=c(a).height(),j=f+g,k=f+g+h,c(".scroller").length||d.height(Math.max(0,e-f)),c("img.hide-until-load:closeToView").each(function(){var a=c(this);a.removeClass("hide-until-load").attr("src",a.data("src"))}),c(".enter:aboveFold").each(function(){var a=c(this);a.removeClass("enter")})}),i();var l={init:function(){this.cacheItems(),this.bindEvents()},cacheItems:function(){this.$triggers=c("#contact-toggle, #close"),this.$container=c("#contact"),this.$feedBk=c("#contact-feedback"),this.$form=c("#contact-form"),this.$fields=this.$form.find("input, textarea"),this.$submit=this.$form.find("button"),this.$close=c("#close"),this.$submit.data("originalText",this.$submit.text())},bindEvents:function(){this.$triggers.click(this.toggleForm),this.$form.submit(this.submitForm),this.$fields.keyup(this.updateSubmit),c(b).keyup(function(a){27===a.which&&l.$close.click()}),this.$container.on("click","#try-again",this.retry)},clearForm:function(){var a=l.$feedBk.children();a.length&&(a.remove(),l.$form.show()),l.$feedBk.hide(),l.$fields.val("")},showForm:function(){this.$triggers.addClass("selected"),this.$submit.text(this.$submit.data("originalText")),this.$container.slideDown(300,function(){l.$fields.eq(0).focus(),l.$close.fadeIn(200)})},hideForm:function(){this.$triggers.removeClass("selected"),this.$close.fadeOut(200),this.$container.slideUp(300,this.clearForm)},toggleForm:function(a){a.preventDefault();var b=c(this);b.hasClass("selected")||b.hasClass("force-close")?l.hideForm():l.showForm()},retry:function(a){a.preventDefault(),l.$feedBk.fadeOut(300,function(){l.$form.delay(200).fadeIn(400),l.updateSubmit(),l.$submit.text(l.$submit.data("originalText"))})},updateSubmit:function(){var a=l.$fields.filter(":invalid").length?!0:!1;l.$submit.attr("disabled",a)},submitForm:function(a){a.preventDefault();var b=c(this);l.$submit.attr("disabled",!0).text("Sending message..."),c.ajax({url:"http://rob-mcc-contact-form.herokuapp.com/send_email",type:"post",dataType:"json",data:b.serialize(),success:function(a){l.$container.height(l.$container.height()),b.fadeOut(400),l.$feedBk.html(a.message).delay(401).fadeIn(400)}})}};l.init(),c(".gallery a").lightbox()});var f=!1,g=location.href;d.data("ajaxLinks",!0),d.keyup(function(a){(17===a.which||91===a.which)&&d.data("ajaxLinks",!0)}),d.keydown(function(a){(17===a.which||91===a.which)&&d.data("ajaxLinks",!1)}),d.on("click",'a:not(.njx):not(.fancybox-close):not(.fancybox-nav):not([href^="http"])',function(a){if(d.data("ajaxLinks")){a.preventDefault();var b=c(this).attr("href");h(b),history.pushState("","",b)}}),c(a).bind("popstate",function(){return f||g!==location.href?(h(location.pathname),void 0):(f=!0,void 0)});var j="p1r3";!function(){var a=b.createElement("script");a.type="text/javascript",a.async=!0,a.src="//"+j+".disqus.com/embed.js",(b.getElementsByTagName("head")[0]||b.getElementsByTagName("body")[0]).appendChild(a)}()}(window,window.document,jQuery,jQuery("body"),jQuery("#content"));